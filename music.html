<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>music</title>
    <style>
        :root {
            --vol-thumb-width: 12px;
            --vol-thumb-height: 12px;
            --vol-thumb-appearance: none;
            --vol-thumb-border-radius: 50%;
            --vol-thumb-background-color: rgba(0, 0, 0, 0.9);
        }


        .setMute {
            text-decoration: line-through;
            text-decoration-style: dotted;
            text-decoration-color: #FF9224;
            text-decoration-thickness: 7px;
        }


        #controlPanel {
            border: 5px solid black;
            border-radius: 10px;
            width: 800px;
            height: 750px;
            padding: 20px;
            margin: auto;
        }

        #controlPanel span {
            border: 1px solid black;
            cursor: pointer;
            font-size: 4rem;
            box-shadow: 3px 3px 7px black;
            padding: 3px;
            font-family: webdings;
        }

        #volumeControl>input[type="range"] {
            width: 85%;
            height: 7px;
            appearance: none;
            border: 1px solid black;
            border-radius: 30px;
        }

        #volumeControl>input[type="range"]::-webkit-slider-thumb {
            width: var(--vol-thumb-width);
            height: var(--vol-thumb-height);
            appearance: var(--vol-thumb-appearance);
            border-radius: var(--vol-thumb-border-radius);
            background-color: var(--vol-thumb-background-color);
        }

        #volumeControl>input[type="range"]::-moz-range-thumb {
            width: var(--vol-thumb-width);
            height: var(--vol-thumb-height);
            appearance: var(--vol-thumb-appearance);
            border-radius: var(--vol-thumb-border-radius);
            background-color: var(--vol-thumb-background-color);
        }

        #volumeControl>button {
            width: 25px;
            height: 20px;
            border-width: 1px;
            text-align: center;
            cursor: pointer;
        }

        #volumeControl>input[type="text"] {
            width: 5%;
            height: 20px;
            border: 1px solid black;
            color: black;
            text-align: center;
        }

        #information>div {
            text-align: center;
            font-size: 20px;
            margin-top: 20px;
        }
    </style>

</head>

<body>

    <audio src="music/painter.mp3" title="HITA/小曲兒 - 丹青客" controls id="myMusic"></audio>
    <hr>

    <div id="controlPanel">
        <div id="functionButtons">
            <span onclick="playMusic()">4</span>
            <span onclick="stopMusic()">&lt;</span>
            <span onclick="changeTime(-5)">7</span>
            <span onclick="changeTime(+5)">8</span>
            <span onclick="setMute()">U</span>
        </div>
        <hr>
        <div id="volumeControl">
            <input type="range" oninput="setVolumeByRangeBar()" value="50">
            <button onclick="changeVolume(-1)">-</button>
            <button onclick="changeVolume(1)">+</button>
            <input type="text" value="50" readonly>
        </div>
        <hr>
        <div id="information">
            <div>00:00 / 00:00</div>
            <div>歡迎使用我的音樂播放器</div>
            <div>[正常狀態]</div>
        </div>

    </div>


    <script>
        var myMusic = document.getElementById("myMusic");
        var volumeControl = document.getElementById("volumeControl");
        var information = document.getElementById("information");
        var playStatus = document.getElementById("playStatus");



        //歌曲資訊
        var musicDuraion = information.children[0];
        var playStatus = information.children[1];

        function getTimeFormat(t) {
            var min = parseInt(t.toFixed(0) / 60);
            var sec = parseInt(t.toFixed(0) % 60);


            min = min < 10 ? "0" + min : min;
            sec = sec < 10 ? "0" + sec : sec;

            return min + ":" + sec;
        }

        function setMusicDuraion() {
            musicDuraion.innerHTML = getTimeFormat(myMusic.currentTime) + " / " + getTimeFormat(myMusic.duration);
        }


        //音量
        var rangeVolume = volumeControl.children[0];
        var textVolume = volumeControl.children[3];

        setVolumeByRangeBar();

        function setMute() {
            myMusic.muted = !myMusic.muted;
            event.target.className = event.target.className == "setMute" ? "" : "setMute";
        }

        function changeVolume(v) {
            rangeVolume.value = parseInt(rangeVolume.value) + v;
            setVolumeByRangeBar();
        }

        function setVolumeByRangeBar() {
            textVolume.value = rangeVolume.value;
            myMusic.volume = textVolume.value / 100;   //真正寫入音量屬性值
            rangeVolume.style.backgroundImage = `linear-gradient(to right, rgb(255,179,14) ${rangeVolume.value}%, rgb(240,240,240) ${rangeVolume.value}%)`;
        }



        //播放+暫停+停止
        function playMusic() {
            myMusic.play();
            event.target.innerHTML = ";";
            event.target.onclick = pauseMusic;

            setInterval(setMusicDuraion, 1000);

            playStatus.innerHTML = myMusic.title;
        }

        function pauseMusic() {
            myMusic.pause();
            event.target.innerHTML = "4";
            event.target.onclick = playMusic;

            playStatus.innerHTML = "音樂暫停";
        }

        function stopMusic() {
            //音樂要停下來且時間歸零
            myMusic.pause();
            myMusic.currentTime = 0;
            event.target.previousElementSibling.innerHTML = "4";
            event.target.previousElementSibling.onclick = playMusic;

            playStatus.innerHTML = "音樂停止";
        }


        //倒轉+快轉
        function changeTime(s) {
            myMusic.currentTime += s;
        }


    </script>

</body>

</html>