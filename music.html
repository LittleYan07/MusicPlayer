<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>music</title>
    <style>
        .setMute {
            text-decoration: line-through;
            text-decoration-style: dotted;
            text-decoration-color: #FF9224;
            text-decoration-thickness: 7px;
        }


        #controlPanel {
            border: 5px solid black;
            border-radius: 10px;
            width: 800px;
            height: 750px;
            padding: 20px;
            margin: auto;
        }

        #controlPanel span {
            border: 1px solid black;
            cursor: pointer;
            font-size: 4rem;
            box-shadow: 3px 3px 7px black;
            padding: 3px;
            font-family: webdings;
        }

        #volumeControl>input[type="range"] {
            width:85%;
            height:5px;
            appearance: none;
            border:1px solid black;
            border-radius:30px;
            background-color: rgba(211,211,211,0.95);
        }

        #volumeControl>input[type="range"]::-webkit-slider-thumb {            
            width:12px;
            height:12px;
            appearance: none;            
            border-radius:50%;
            background-color:rgba(0,0,0,0.9);
        }

        #volumeControl>input[type="text"] {
            width: 5%;
            text-align: center;
        }
    </style>

</head>

<body>

    <audio src="music/丹青客.mp3" controls id="myMusic"></audio>
    <hr>

    <div id="controlPanel">
        <div id="functionButtons">
            <span onclick="playMusic()">4</span>
            <span onclick="stopMusic()">&lt;</span>
            <span onclick="changeTime(-5)">7</span>
            <span onclick="changeTime(+5)">8</span>
            <span onclick="setMute()">U</span>
        </div>
        <hr>
        <div id="volumeControl">
            <input type="range" oninput="setVolumeByRangeBar(0)" value="100">
            <button onclick="changeVolume(-1)">-</button>
            <button onclick="changeVolume(+1)">+</button>
            <input type="text" value="50" readonly>
        </div>

    </div>


    <script>
        var myMusic = document.getElementById("myMusic");
        var volumeControl = document.getElementById("volumeControl");
        




        //音量
        var rangeVolume = volumeControl.children[0];
        var textVolume = volumeControl.children[3];

        function setMute() {
            myMusic.muted = !myMusic.muted;
            event.target.className = event.target.className == "setMute" ? "" : "setMute";
        }

        function changeVolume(v) {
            rangeVolume.value = parseInt(rangeVolume.value) + v;
            setVolumeByRangeBar();            
        }

        function setVolumeByRangeBar() {
            console.log(event.target.value);            
            textVolume.value = rangeVolume.value;
            myMusic.volume = textVolume.value / 100;   //真正寫入音量屬性值
        }



        //播放+暫停+停止
        function playMusic() {
            myMusic.play();
            event.target.innerHTML = ";";
            event.target.onclick = pauseMusic;
        }

        function pauseMusic() {
            myMusic.pause();
            event.target.innerHTML = "4";
            event.target.onclick = playMusic;
        }

        function stopMusic() {
            //音樂要停下來且時間歸零
            myMusic.pause();
            myMusic.currentTime = 0;
            event.target.previousElementSibling.innerHTML = "4";
            event.target.previousElementSibling.onclick = playMusic;
        }


        //倒轉+快轉
        function changeTime(s) {
            myMusic.currentTime += s;
        }


    </script>

</body>

</html>